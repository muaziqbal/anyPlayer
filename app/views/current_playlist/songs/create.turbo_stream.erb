<% if @current_song.nil? %>
  <%= turbo_stream.prepend 'turbo-playlist-list-content', partial: 'playlists/songs/song', locals: { song: @song, playlist: @playlist } %>
<% else %>
  <%# add song next to the current_song %>
  <%= turbo_stream.replace @current_song, partial: 'playlists/songs/song', collection: [@current_song, @song], locals: { playlist: @playlist }, cached: true %>
<% end %>

<%= turbo_stream.update 'turbo-playlist-songs-count', @playlist.songs.size %>
<%= render_flash %>
