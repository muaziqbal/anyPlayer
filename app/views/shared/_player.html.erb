<div class='c-player u-h-100' data-controller='player media-session'>
  <div data-player-target='header' class='c-player__header u-position-relative' data-test-id='player_header'>
    <div class='u-position-relative u-overflow-hidden'>
      <div class='c-player__header__background' data-player-target='backgroundImage'></div>
      <div class='c-player__header__content c-card c-card--horizontal u-p-medium u-position-relative'>
        <img data-player-target='image' class='c-card__image u-image-small' />
        <div class='c-card__body'>
          <h1 class='c-card__body__title u-text-truncate' data-player-target='songName' data-test-id='player_song_name'></h1>
          <p class='c-card__body__text u-text-truncate' data-player-target='albumName'></p>
          <p class='c-card__body__text u-text-truncate' data-player-target='artistName'></p>
          <div class='c-card__body__text u-text-monospace u-mt-narrow'>
            <span class='u-text-color-primary' data-player-target='songTimer'></span>
            <span class='u-mx-narrow'>/</span>
            <span data-player-target='songDuration'></span>
          </div>
        </div>
      </div>
    </div>
    <div class='c-player__progress u-cursor-pointer'>
      <progress data-player-target='progress' data-action='click->player#seek' class='u-w-100' max='100'></progress>
    </div>
    <div data-player-target='loader' class='c-overlay u-display-none'>
      <%= loader_tag %>
    </div>
  </div>
  <div class='u-px-small u-py-medium o-flex o-flex--justify-between o-flex--align-center c-player__control'>
    <div class='u-cursor-pointer' data-action='click->player#nextMode'>
      <span data-player-target='modeButton'><%= icon_tag 'repeat', title: t('text.repeat_mode') %></span>
      <span data-player-target='modeButton'><%= icon_tag 'repeat-one', title: t('text.single_mode') %></span>
      <span data-player-target='modeButton'><%= icon_tag 'shuffle', title: t('text.shuffle_mode') %></span>
    </div>
    <div>
      <span class='u-text-color-primary u-cursor-pointer' data-action='click->player#previous' data-test-id='player_previous_button'>
        <%= icon_tag 'rewind', size: 'large', title: t('text.previous_song') %>
      </span>
      <span class='u-mx-medium u-text-color-primary u-cursor-pointer' data-action='click->player#play' data-player-target='playButton' data-test-id='player_play_button'>
        <%= icon_tag 'play', size: 'large', title: t('text.play_song') %>
      </span>
      <span class='u-mx-medium  u-text-color-primary u-cursor-pointer u-display-none' data-action='click->player#pause' data-player-target='pauseButton' data-test-id='player_pause_button'>
        <%= icon_tag 'pause', size: 'large', title: t('text.pause_song') %>
      </span>
      <span class='u-text-color-primary u-cursor-pointer' data-action='click->player#next' data-test-id='player_next_button'>
        <%= icon_tag 'fast-forward', size: 'large', title: t('text.next_song') %>
      </span>
    </div>
    <div data-action='turbo:submit-end->player#toggleFavorite' data-test-id='player_favorite_button'>
      <%= button_to favorite_playlist_songs_path, form_class: 'u-visibility-hidden', form: { 'data-player-target' => 'favoriteButton' } do %>
        <%= icon_tag 'heart', title: t('text.toggle_favorite') %>
      <% end %>
      <%= button_to favorite_playlist_songs_path, method: :delete, form_class: 'u-display-none', form: { 'data-player-target' => 'unFavoriteButton' }, class: 'u-text-color-red' do %>
        <%= icon_tag 'heart', title: t('text.toggle_favorite') %>
      <% end %>
    </div>
  </div>
  <div class='u-py-tiny u-bg-primary u-text-align-center u-display-none u-display-block@extra-small' data-action='click->player#collapse'>
    <%= icon_tag 'expand-more', size: 'large', title: t('text.collapse_player') %>
  </div>
</div>
